<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS 361 - Project</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

</head>
<body>
    <!-- Nav bar -->
    <!-- Uses bootstrap -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary sticky-top">
        <div class="container-fluid">
        <a class="navbar-brand" href="index.html">Home</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link" href="encryption.html">Encryption</a>
                    <a class="nav-link" href="decryption.html">Decryption</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
    
    <br>
    
    <!-- Title -->
    <h1 style="text-align: center;">Base64 Encoding Page</h1>
    
    <br>

    <!-- Directions -->
    <h3>How to Use This Page</h3>

    <br>

    <p>Welcome to the Base64 Encoding page. The navigation bar at the top is your gateway to the site: 'Home' returns you to the main page, while 'Encryption' and 'Decryption' lead to specialized sections, where you can find other encryption and decryption schemes. Right below this, you'll find the 'Overview of Base64' section, featuring an engaging accordion menu. This interactive tool answers pivotal questions like 'What is Base64?', 'How do you encode in Base64?', 'What is the difference between encryption and encoding?', and 'What are some resources to learn more?', complete with links to further reading. Dive into each topic by clicking on the questions to expand and access detailed information. Moving down, the Base64 Encoder section awaits. Here, a text area labeled "Plain Text" is set up for you to enter any text you wish to convert into Base64. Two buttons, 'Generate Lorem Ipsum' and 'Encode', enhance your experience. The 'Generate Lorem Ipsum' button fills the text area with sample text, showcasing the encoding process. Click 'Encode' to transform your entered text into Base64, displayed in the "Encoded Text" box beneath. This hands-on feature allows a direct insight into the encoding process. Finally, at the bottom, two practical buttons - 'Decode Page' and 'Copy Text' - conclude the page's functionality. The 'Decode Page' button transfers the encoded text to the Base64 Decoding page, ready for reverse processing. 'Copy Text' conveniently saves the encoded text to your clipboard.</p>

    <!-- Local storage note -->
    <br>

    <p>
        <strong>Important Notice Regarding Text Encryption</strong> Any text you choose to encrypt using our service will be stored in your browser's local storage along with associated metadata, including the timestamp of encryption and encryption details such as passwords or the number of rails, depending on the encryption method. This information is stored to enhance user experience and provide seamless service, ensuring your data is kept locally on your device and not on external servers.<br>
        To find the local storage in your browser, you can generally follow these steps:<br>
    </p>

    <ol>
        <li><strong>Open the Developer Tools:</strong> In browsers like Google Chrome, Firefox, or Microsoft Edge, you can access this by right-clicking on the page and selecting "Inspect" or pressing <kbd>Ctrl+Shift+I</kbd> (or <kbd>Cmd+Opt+I</kbd> on Mac).</li>
        <li><strong>Navigate to the Application Tab:</strong> In the developer tools, look for a tab labeled "Application" (in Chrome and Edge) or "Storage" (in Firefox).</li>
        <li><strong>Locate the Local Storage Section:</strong> Find the "Local Storage" section in the Application or Storage tab and click on it to expand.</li>
        <li><strong>View and Manage Data:</strong> Here, you can view, modify, or delete data stored by websites in your browser's local storage.</li>
    </ol>

    <p>Remember, the exact steps might vary slightly based on the browser you're using.</p>

    <br>

    <!-- Overview section -->
    <h3>Overview of Base64</h3>

    <br>

    <!-- Accordion 1 -->
    <!-- Uses bootstrap -->
    <div class="accordion" id="accordionExample">
    <div class="accordion-item">
        <h2 class="accordion-header">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
            What is Base64?
        </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
        <div class="accordion-body">
            <p>Base64 is a method for encoding binary data into a string of ASCII characters, making it more suitable for transmission over mediums that only reliably support text. It's often used in data transfer protocols, including embedding image data within HTML or CSS files. The encoding process involves converting binary data into a set of 64 printable characters from the ASCII standard. These 64 characters include uppercase and lowercase letters (A-Z, a-z), digits (0-9), plus (+), and slash (/). The equal sign (=) is used as a padding character.</p>
        </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
            How do you encode in Base64?
        </button>
        </h2>
        <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
        <div class="accordion-body">
            <p>Encoding in Base64 involves dividing the input data into groups of three bytes (24 bits) and then converting these groups into four encoded characters. Each 6 bits of the input data is mapped to one of the 64 characters in the Base64 alphabet. If the total number of input bytes is not divisible by three, the input is padded with zeros to make it so. The padding bytes are then represented as '=' in the final encoded text to indicate that the last group contained fewer than three bytes.</p>
        </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
            What is the difference between encryption and encoding?
        </button>
        </h2>
        <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
        <div class="accordion-body">
            <p>Encryption and encoding are two different methods for altering data, but with distinct purposes. Encryption is designed for securing data, making it unreadable to unauthorized users. It requires a key for both encryption and decryption, ensuring that only authorized parties can access the original data. Encoding, on the other hand, is not about security but about data representation or transformation. It converts data into another format using a scheme that is openly available and reversible (like Base64 encoding), often for compatibility or transmission purposes.</p>
        </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
            What are some resources to learn more?
        </button>
        </h2>
        <div id="collapseFour" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
        <div class="accordion-body">
            <p>
            1. <a href="https://www.base64decode.org/" >base64Decode.org</a><br>
            2. <a href="https://developer.mozilla.org/en-US/docs/Glossary/Base64"></a>developer.mozilla.org<br>
            3. <a href="https://en.wikipedia.org/wiki/Base64"></a>en.wikipedia.org
            </p>
        </div>
        </div>
    </div>
    </div>
    
    <br>
    <br>

    <!-- Encoder section -->
    <h3>Base64 Encoder</h3>

    <br>

    <!-- Input Textarea -->
    <div class="form-floating">
        <textarea class="form-control" style="height: 250px;" placeholder="This is where the plain text will go" id="base64InputTextarea"></textarea>
        <label for="base64InputTextarea">Plain Text</label>
    </div>

    <br>

    <!-- Lorem Ipsum button -->
    <button type="button" id="base64LoremIpsum" class="btn btn-secondary">Generate Lorem Ipsum</button>

    <!-- Encode button -->
    <button type="button" id="base64EncodeButton"class="btn btn-outline-secondary">Encode</button>

    <br>
    <br>
    <br>

    <!-- Output Textarea -->
    <div class="form-floating">
        <textarea class="form-control" style="height: 250px;" placeholder="This is where the encoded text will go" id="base64OutputTextarea" disabled></textarea>
        <label for="base64OutputTextarea">Encoded Text</label>
    </div>

    <br>

    <!-- Decode Page button -->
    <button type="button" id="base64DecodePageButton" class="btn btn-secondary">Decode Page</button>

    <!-- Copy button -->
    <button type="button" id="base64CopyButton" class="btn btn-outline-secondary">Copy Text</button>
        
    <br>
    <br>
    <br>
    <br>
    <br>
    </div>

    <!-- Bootstrap script -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    
    <!-- My script -->
    <script>
        // Variables that match to various DOM elements
        const loremButton = document.getElementById('base64LoremIpsum')
        const encodeButton = document.getElementById('base64EncodeButton')
        const decodeButton = document.getElementById('base64DecodePageButton')
        const copyButton = document.getElementById('base64CopyButton')
        const inputText = document.getElementById('base64InputTextarea')
        const outputText = document.getElementById('base64OutputTextarea')

        // Function to get the lorem ipsum api request
        loremButton.addEventListener('click', function() {
            // Throw an API request
            fetch('http://18.219.6.249:8080/generate-text?size=3')
                // Data comes back in JSON format
                .then(response => response.json())
                // Set the input text to the retrieved data
                .then(data => {
                    inputText.value = data.text
                })
                // If there's an error, print it to the console
                .catch(err => {
                    console.error('Error fetching Lorem Ipsum: ', err)
                })
        })

        // Function to encode the text
        encodeButton.addEventListener('click', function() {
            var plainText = inputText.value

            // If the plaintext text is empty
            if(plainText.trim() === '') {
                // Send an alert and exit
                alert('Plain Text cannot be empty!')
                return
            }

            var encodedText = btoa(plainText) // btoa() changes from plain text to base64

            // Set the output text to the encoded text variable
            outputText.value = encodedText
            console.log("Updated Encoded Textarea")

            // Save text to local storage (calls the helper function)
            saveText(encodedText)
        })

        // Helper function to save the encoded text to local storage
        function saveText(encodedText) {
            // Get the current time
            var timestamp = new Date().toISOString()

            // Save data into JSON
            var storageEntry = {
                encodedText: encodedText,
                timestamp: timestamp
            }

            // Save the JSON into local storage
            localStorage.setItem("encryptionEntry-" + timestamp, JSON.stringify(storageEntry))
        }

        // Function to take the encoded text and place it inside of its respective decoder page
        decodeButton.addEventListener('click', function() {
            var encodedText = outputText.value

            // If the encoded text is empty
            if(encodedText.trim() === '') {
                // Send an alert and exit
                alert('Encoded Text cannot be empty!')
            }

            // Save the variable to local storage
            localStorage.setItem('encodedText', encodedText)

            // Move to the decoder page
            window.location.href = 'decryption-base64.html'
        })

        // Function to copy text to the clipboard
        copyButton.addEventListener('click', function() {
            // Copy to clipboard and change the name of the button to "Copied" for 1 second
            navigator.clipboard.writeText(outputText.value)
            .then(() => {
                copyButton.textContent = 'Copied!'
                setTimeout(() => {
                    copyButton.textContent = 'Copy'
                }, 1000)
            })
            // If there's an error, print it to the console
            .catch(err => {
                console.error('Error in copying text: ', err)
            })
        })
    </script>
</body>
</html>